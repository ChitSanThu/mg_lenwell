webpackJsonp([54],{Ku0P:function(e,a){},v9Bm:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("z2X1"),n=t.n(i),o={name:"profile",data:function(){return{lang:this.$i18n.locale,userInfo:[],fileList:[],adminForm:{account:"",avatar:"",nickname:"",mobile:"",email:"",password:""},rules:{nickname:[{required:!0,message:this.$t("config.nickname_no"),trigger:"blur|change"}],avatar:[{required:!0,message:this.$t("config.avatar_no"),trigger:"blur|change"}],mobile:[{required:!0,message:this.$t("config.mobile_no"),trigger:"blur|change"},{pattern:/^1[1|2|3|4|5|6|7|8|9][0-9]\d{8}$/,message:this.$t("config.mobile_no_error"),trigger:"blur|change"}],email:[{required:!0,message:this.$t("config.email_no"),trigger:"blur|change"},{pattern:"^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$",message:this.$t("config.email_no_error"),trigger:"blur|change"}]}}},computed:{uploadAction:function(){return this.$store.state.uploadAction}},created:function(){this.getAdminInfo()},methods:{getAdminInfo:function(){var e=this,a=n.a.getItem("userinfo");e.$request.getAdminInfo({id:a.id}).then(function(a){1==a.code&&a.data&&(e.userInfo=a.data,e.adminForm.avatar=a.data.avatar,e.adminForm.nickname=a.data.nickname,e.adminForm.mobile=a.data.mobile,e.adminForm.email=a.data.email,e.adminForm.account=a.data.account,e.fileList.push({url:a.data.full_avatar}))})},fileUpload:function(e){var a=this;e.status="uploading";var t=new FormData;t.append("file",e.file),a.$request.fileUpload(t).then(function(t){1==t.code?(a.userInfo.full_avatar=t.data.fullUrl,a.adminForm.avatar=t.data.url,e.status="done"):e.status="failed"})},submitForm:function(e){var a=this,t=this;t.$refs[e].validate(function(e){e&&t.$request.adminProfile(t.adminForm).then(function(e){if(1==e.code){var i=n.a.getItem("userinfo");i.nickname=t.adminForm.nickname,i.avatar=t.userInfo.full_avatar,n.a.setItem({name:"userInfo",value:i,expires:864e5}),a.$notify({title:t.$t("config.tips"),message:e.msg,type:"success",duration:"2000"})}})})}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"profile-container"},[t("div",{staticStyle:{"margin-bottom":"30px"}},[e._v("Personal Data")]),e._v(" "),t("el-form",{ref:"adminForm",staticClass:"demo-adminForm",attrs:{model:e.adminForm,rules:e.rules,"status-icon":"","label-width":"120px"}},[t("div",{staticClass:"avatar"},[t("van-uploader",{attrs:{"preview-size":"100px","preview-full-image":!1,"after-read":e.fileUpload,"max-count":1},model:{value:e.fileList,callback:function(a){e.fileList=a},expression:"fileList"}})],1),e._v(" "),t("div",{staticClass:"nickname"},[e._v(e._s(e.userInfo.nickname))]),e._v(" "),t("div",{staticStyle:{height:"20px"}}),e._v(" "),t("el-form-item",{attrs:{label:e.$t("config.account"),prop:"account"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.adminForm.account,callback:function(a){e.$set(e.adminForm,"account",a)},expression:"adminForm.account"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("config.nickname"),prop:"nickname"}},[t("el-input",{model:{value:e.adminForm.nickname,callback:function(a){e.$set(e.adminForm,"nickname",a)},expression:"adminForm.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("config.mobile"),prop:"mobile"}},[t("el-input",{model:{value:e.adminForm.mobile,callback:function(a){e.$set(e.adminForm,"mobile",a)},expression:"adminForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("config.email"),prop:"email"}},[t("el-input",{model:{value:e.adminForm.email,callback:function(a){e.$set(e.adminForm,"email",a)},expression:"adminForm.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("config.password"),prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"new-password",placeholder:"Please leave blank if you do not want to change your password"},model:{value:e.adminForm.password,callback:function(a){e.$set(e.adminForm,"password",a)},expression:"adminForm.password"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"d-button",attrs:{type:"success"},on:{click:function(a){return e.submitForm("adminForm")}}},[e._v(e._s(e.$t("config.submit")))])],1)],1)],1)},staticRenderFns:[]};var s=t("VU/8")(o,r,!1,function(e){t("Ku0P")},null,null);a.default=s.exports}});