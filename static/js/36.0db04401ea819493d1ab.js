webpackJsonp([36],{Aete:function(e,t){},i9Gk:function(e,t){},kYz2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Js1K"),o=i("pdY+"),s=i("hzSB"),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order-form-body"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:e.$t("orders.priority"),prop:"state"}},[i("el-select",{attrs:{placeholder:e.$t("config.select")},model:{value:e.formData.priority,callback:function(t){e.$set(e.formData,"priority",t)},expression:"formData.priority"}},e._l(e.priorityList,function(t){return i("el-option",{key:t.id,attrs:{label:"ch"==e.lang?t.title_zh:t.title,value:t.id}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")({name:"priority",props:["node_code"],data:function(){return{lang:this.$i18n.locale,priorityList:[{id:1,title:"Average",title_zh:"一般"},{id:2,title:"Middling",title_zh:"中等"},{id:3,title:"High",title_zh:"高"},{id:4,title:"Urgent",title_zh:"加急"}],formData:{node_code:"",priority:""}}},created:function(){},methods:{submitForm:function(){var e=this,t=this;t.formData.node_code=t.node_code,t.$request.ordersupdatepriority(t.formData).then(function(i){1==i.code?(t.$emit("changeupdatepriority",i.data),e.$notify({title:t.$t("config.tips"),message:i.msg,type:"success",duration:"2000"})):t.formData.form_token=i.data.token})}}},l,!1,function(e){i("i9Gk")},"data-v-6c137994",null).exports,n={components:{layoutPage:a.a,orderDetails:o.a,personnel:s.a,priority:r},inject:["reload"],data:function(){return{lang:this.$i18n.locale,dialogTableVisible:!1,loadingTable:!0,dialogViewTitle:"Info",searchShow:!1,personnelData:"",isDetails:!1,elDialogType:"edit",dialogViewWidth:"800px",search:{page:1,pagesize:15,order_code:"",node_code:"",model_type_id:"",phone_model_id:"",is_shop:"",nickname:"",mobile:"",email:"",user_id:"",repair_admin:""},node_code:null,total:0,model_list:[],modelList:[],priority:[],tableheight:"100%",tableData:[]}},computed:{rank:function(){return this.$store.state.rank}},created:function(){this.getList(),this.$store.state.modellist&&this.$store.state.modellist.length>0?this.model_list=this.$store.state.modellist:this.getModelList()},methods:{refresh:function(){this.getList()},bindClikeUser:function(e){this.search.user_id=e.user_id,this.search.page=1,this.getList()},bindClikeAdmin:function(e){this.search.repair_admin=e.repair_admin,this.search.page=1,this.getList()},bindSearch:function(){this.searchShow?this.searchShow=!1:this.searchShow=!0},searchTableList:function(){this.search.page=1,this.getList()},resetForm:function(){var e=this.search;for(var t in e)"page"==t?e[t]=1:"pagesize"==t||(e[t]="");this.search=e,this.getList()},changPageSize:function(e){this.search.pagesize=e,this.getList()},changCurrentPage:function(e){this.search.page=e,this.getList()},changJumpPage:function(e){this.search.page=e,this.getList()},getList:function(){var e=this;e.loadingTable=!0,e.$request.getOrdersRepairList(e.search).then(function(t){if(e.loadingTable=!1,1==t.code&&t.data&&t.data.list){for(var i in t.data.list)t.data.list[i].checked=!1;e.tableData=t.data.list,e.total=t.data.total?t.data.total:0}})},updatePriority:function(e){this.node_code=e.node_code,this.dialogViewWidth="400px",this.dialogViewTitle="Update priority",this.elDialogType="priority",this.dialogTableVisible=!0},changeupdatepriority:function(e){this.dialogTableVisible=!1,this.node_code="",this.getList()},getModelList:function(){var e=this,t=this;t.$request.getModelsTreeList().then(function(i){if(i.data){for(var a in i.data)i.data[a].id=String(i.data[a].id);t.model_list=i.data,e.$store.state.modellist=i.data}})},bindChangeModelType:function(){for(var e in this.model_list)this.model_list[e].id==this.search.model_type_id&&(this.model_list[e].node?this.modelList=this.model_list[e].node:this.modelList=[])},bindMemo:function(e){this.$router.push({path:"/order/memo",query:{node_code:e.node_code}})},viewDetails:function(e){this.node_code=e.node_code,this.isDetails=!0},bindPersonnel:function(e){this.elDialogType="personnel",this.dialogViewTitle="Bind maintenance personnel",this.dialogViewWidth="600px",this.personnelData=e,this.dialogTableVisible=!0},changePersonnel:function(){this.dialogTableVisible=!1,this.getList()},backGo:function(e){this.isDetails=e},bindReceiving:function(e){var t=this,i=this;i.$request.getOrdersReceiveDevice({node_code:e.node_code}).then(function(e){1==e.code&&(t.$notify({title:i.$t("config.tips"),message:e.msg,type:"success"}),i.getList())})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index-container"},[e.isDetails?e._e():i("div",{staticClass:"list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],staticClass:"toolbar_form"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.search,"label-width":"130px"}},[i("el-form-item",{attrs:{label:e.$t("orders.order_code")}},[i("el-input",{model:{value:e.search.node_code,callback:function(t){e.$set(e.search,"node_code",t)},expression:"search.node_code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("config.user_id")}},[i("el-input",{model:{value:e.search.user_id,callback:function(t){e.$set(e.search,"user_id",t)},expression:"search.user_id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("orders.user_id")}},[i("el-input",{model:{value:e.search.nickname,callback:function(t){e.$set(e.search,"nickname",t)},expression:"search.nickname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("config.email")}},[i("el-input",{model:{value:e.search.email,callback:function(t){e.$set(e.search,"email",t)},expression:"search.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("config.mobile")}},[i("el-input",{model:{value:e.search.mobile,callback:function(t){e.$set(e.search,"mobile",t)},expression:"search.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("dashboard.company")}},[i("el-input",{model:{value:e.search.company,callback:function(t){e.$set(e.search,"company",t)},expression:"search.company"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("orders.model_type_id")}},[i("el-select",{attrs:{placeholder:e.$t("config.select")},on:{change:e.bindChangeModelType},model:{value:e.search.model_type_id,callback:function(t){e.$set(e.search,"model_type_id",t)},expression:"search.model_type_id"}},[i("el-option",{key:"",attrs:{label:e.$t("config.select"),value:""}}),e._v(" "),e._l(e.model_list,function(t,a){return e.model_list?i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}}):e._e()})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("orders.model_id")}},[i("el-select",{attrs:{disabled:!e.search.model_type_id,placeholder:e.$t("config.select")},model:{value:e.search.phone_model_id,callback:function(t){e.$set(e.search,"phone_model_id",t)},expression:"search.phone_model_id"}},[i("el-option",{key:"",attrs:{label:e.$t("config.select"),value:""}}),e._v(" "),e._l(e.modelList,function(e,t){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{staticClass:"d-button",attrs:{type:"primary"},on:{click:function(t){return e.searchTableList()}}},[e._v(e._s(e.$t("config.search")))]),e._v(" "),i("el-button",{staticClass:"d-button",on:{click:function(t){return e.resetForm()}}},[e._v(e._s(e.$t("config.reset")))])],1)],1)],1),e._v(" "),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"toolbar_left"},[i("el-button",{staticClass:"d-refresh-button",attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}})],1),e._v(" "),i("div",{staticClass:"toolbar-form"},[i("el-button",{staticClass:"d-button",attrs:{type:"info",icon:"el-icon-search"},on:{click:e.bindSearch}})],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{fixed:"",prop:"node_code",label:e.$t("orders.order_code"),width:"130"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"150",label:e.$t("orders.user_id")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"username",attrs:{title:t.row.user.nickname},on:{click:function(i){return e.bindClikeUser(t.row)}}},[e._v(e._s(t.row.user.nickname))])]}}],null,!1,2352640446)}),e._v(" "),i("el-table-column",{attrs:{prop:"subject_txt","min-width":"220",label:e.$t("orders.model_id")}}),e._v(" "),i("el-table-column",{attrs:{prop:"project_title","min-width":"280",label:e.$t("orders.project_id")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s("ch"==e.lang?t.row.project_title_zh:t.row.project_title)+"\n        ")]}}],null,!1,1391158138)}),e._v(" "),i("el-table-column",{attrs:{prop:"created_at","min-width":"200",label:"Order Time"}}),e._v(" "),e.rank&&e.rank.details||e.rank.payment?i("el-table-column",{attrs:{fixed:"right",label:e.$t("config.operate"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-dropdown",[i("el-button",{attrs:{size:"small",icon:"el-icon-more",circle:""}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.rank&&e.rank.details?i("el-dropdown-item",{nativeOn:{click:function(i){return e.viewDetails(t.row)}}},[e._v(e._s(e.$t("orders.detail_btn")))]):e._e(),e._v(" "),i("el-dropdown-item",{nativeOn:{click:function(i){return e.bindPersonnel(t.row)}}},[e._v(e._s(e.$t("orders.bind_proccess")))])],1)],1)]}}],null,!1,3234891524)}):e._e()],1),e._v(" "),i("layoutPage",{attrs:{total:e.total,currentpage:e.search.page},on:{changPageSize:e.changPageSize,changCurrentPage:e.changCurrentPage,changJumpPage:e.changJumpPage}}),e._v(" "),e.dialogTableVisible?i("el-dialog",{attrs:{visible:e.dialogTableVisible,title:e.dialogViewTitle,width:e.dialogViewWidth},on:{"update:visible":function(t){e.dialogTableVisible=t}}},["personnel"==e.elDialogType?i("personnel",{attrs:{order:e.personnelData},on:{changePersonnel:e.changePersonnel}}):e._e(),e._v(" "),"priority"==e.elDialogType?i("priority",{attrs:{node_code:e.node_code},on:{changeupdatepriority:e.changeupdatepriority}}):e._e()],1):e._e()],1),e._v(" "),e.isDetails?i("orderDetails",{attrs:{node_code:e.node_code},on:{backGo:e.backGo}}):e._e()],1)},staticRenderFns:[]};var c=i("VU/8")(n,d,!1,function(e){i("Aete")},"data-v-070de9fa",null);t.default=c.exports}});