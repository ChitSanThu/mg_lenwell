webpackJsonp([34],{"+p4l":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Js1K"),r={name:"userRolesEdit",props:["id","vipid"],data:function(){var e=this;return{list:[],ruleForm:{form_token:"",id:"",user_vips_id:"",preferential_quota:"",price_start:"0",price_end:""},rules:{user_vips_id:[{required:!0,message:this.$t("user_role.user_vips_id_no"),trigger:"change"}],preferential_quota:[{required:!0,message:this.$t("user_role.preferential_quota_no"),trigger:"blur|change"}],price_start:[{validator:function(t,n,i){if(""===n)return i(new Error(e.$t("user_role.price_start_no")));i()},trigger:"blur|change"}],price_end:[{validator:function(t,n,i){if(""===n)return i(new Error(e.$t("user_role.price_end_no")));if(0==n)i();else{if(n<e.ruleForm.price_start)return i(new Error(e.$t("user_role.price_end_not")));i()}},trigger:"blur|change"}]}}},computed:{},created:function(){this.getUserRoleList(),this.getformtoken(),this.id&&this.getInfo()},methods:{getUserRoleList:function(){var e=this;e.$request.getUserRoleList().then(function(t){if(1==t.code){if(t.data){for(var n in t.data)"ch"==e.$i18n.locale?t.data[n].name=t.data[n].title_zh:t.data[n].name=t.data[n].title,t.data[n].id=Number(t.data[n].id);e.list=t.data}e.ruleForm.user_vips_id=Number(e.vipid)}})},getInfo:function(){var e=this;e.$request.getVipsdiscountInfo({id:e.id}).then(function(t){if(t.data)for(var n in t.data)for(var i in e.ruleForm)n==i&&(e.ruleForm[i]=t.data[n]);console.log(e.ruleForm)}).catch(function(e){})},getformtoken:function(){var e=this;e.$request.getformtoken().then(function(t){e.ruleForm.form_token=t.data.token})},submitForm:function(e){var t=this,n=this;n.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;n.$request.setVipsdiscountSave(n.ruleForm).then(function(e){1==e.code?(n.$emit("changeQuotaDialog",n.ruleForm),t.$notify({title:n.$t("config.tips"),message:e.msg,type:"success",duration:"2000"})):n.getformtoken()})})}}},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rule_edit",staticStyle:{"padding-top":"30px"}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"Vip Level",prop:"user_vips_id"}},[n("el-select",{attrs:{placeholder:e.$t("config.select")},model:{value:e.ruleForm.user_vips_id,callback:function(t){e.$set(e.ruleForm,"user_vips_id",t)},expression:"ruleForm.user_vips_id"}},e._l(e.list,function(t,i){return e.list?n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}}):e._e()}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user_role.preferential_quota"),prop:"preferential_quota"}},[n("el-input",{model:{value:e.ruleForm.preferential_quota,callback:function(t){e.$set(e.ruleForm,"preferential_quota",t)},expression:"ruleForm.preferential_quota"}},[n("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user_role.price_start"),prop:"price_start"}},[n("el-input",{model:{value:e.ruleForm.price_start,callback:function(t){e.$set(e.ruleForm,"price_start",t)},expression:"ruleForm.price_start"}},[n("template",{slot:"append"},[e._v("$")])],2)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user_role.price_end"),prop:"price_end"}},[n("el-input",{model:{value:e.ruleForm.price_end,callback:function(t){e.$set(e.ruleForm,"price_end",t)},expression:"ruleForm.price_end"}},[n("template",{slot:"append"},[e._v("$")])],2)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.$t("config.submit")))])],1)],1)],1)};a._withStripped=!0;var o={render:a,staticRenderFns:[]},l=o;var s=!1;var c=n("VU/8")(r,l,!1,function(e){s||n("Mh/D")},"data-v-1c1acb18",null);c.options.__file="src/view/user/quota/edit.vue";var u=c.exports,d={components:{layoutPage:i.a,quotaEdit:u},data:function(){return{dialogTableVisible:!1,vipid:"",search:{page:1,user_vips_id:"1"},id:null,total:0,vip_list:[],tableheight:"100%",tableData:[],dialogTableTitle:"Info"}},computed:{rank:function(){return this.$store.state.rank}},created:function(){var e=this.$route.query;this.search.user_vips_id=e.id,this.vipid=e.id,this.getList()},methods:{refresh:function(){this.getList()},pageRouter:function(e){this.search.page=e,this.getList()},getList:function(){var e=this;e.$request.getVipsdiscountList(e.search).then(function(t){t.data.forEach(function(e){e.preferential_quota=e.preferential_quota+"%",e.price_start&&""!=e.price_start||(e.price_start="0.00"),e.price_start=e.price_start+"$",e.price_end&&""!=e.price_end||(e.price_end="0.00"),e.price_end=e.price_end+"$"}),e.tableData=t.data,e.total=t.data.page?t.data.page:null,e.tableheight=window.innerHeight-221,t.data.page>1&&(e.tableheight=window.innerHeight-281)})},addRow:function(){this.dialogTableTitle="Add",this.id="",this.dialogTableVisible=!0},EditRow:function(e){this.dialogTableTitle="Edit",this.dialogTableVisible=!0,this.id=e.id},changeQuotaDialog:function(e){this.dialogTableTitle="",this.id="",this.dialogTableVisible=!1,this.getList()},deleteRow:function(e){var t=this,n=this;n.$alert(n.$t("config.delMsg"),n.$t("config.tips"),{confirmButtonText:n.$t("config.confirm"),showCancelButton:!0,cancelButtonText:n.$t("config.cancel")}).then(function(){n.$request.delVipsdiscount({id:e.id}).then(function(e){1==e.code&&(n.getUserList(),t.$notify({title:n.$t("config.tips"),message:e.msg,type:"success"}))})})}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group",staticStyle:{background:"white",padding:"15px","border-radius":"5px"}},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"toolbar_left"},[n("el-button",{staticClass:"d-button",attrs:{type:"success",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.$router.go(-1)}}}),e._v(" "),n("el-button",{staticClass:"d-refresh-button",attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}}),e._v(" "),e.rank&&e.rank.add?n("el-button",{staticClass:"d-buttom",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.$t("config.add")))]):e._e()],1)]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",splict:""}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{prop:"preferential_quota","min-width":"400",label:e.$t("user_role.preferential_quota")}}),e._v(" "),n("el-table-column",{attrs:{prop:"price_start","min-width":"400",label:e.$t("user_role.price_start")}}),e._v(" "),n("el-table-column",{attrs:{prop:"price_end","min-width":"300",label:e.$t("user_role.price_end")}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:e.$t("config.operate"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rank&&e.rank.edit?n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.EditRow(t.row)}}},[e._v("\n            "+e._s(e.$t("config.edit"))+"\n          ")]):e._e(),e._v(" "),e.rank&&e.rank.del?n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteRow(t.row)}}},[e._v("\n            "+e._s(e.$t("config.del"))+"\n          ")]):e._e()]}}])})],1),e._v(" "),e.total&&e.total>1?n("layoutPage",{attrs:{page:e.search.page,num:"5",total:e.total},on:{pageRouter:e.pageRouter}}):e._e(),e._v(" "),e.dialogTableVisible?n("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"500px",title:e.dialogTableTitle},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[n("quotaEdit",{attrs:{id:e.id,vipid:e.vipid},on:{changeQuotaDialog:e.changeQuotaDialog}})],1):e._e()],1)};p._withStripped=!0;var _={render:p,staticRenderFns:[]},f=_;var m=!1;var v=n("VU/8")(d,f,!1,function(e){m||n("ZmLo")},"data-v-e3cf2450",null);v.options.__file="src/view/user/quota/index.vue";t.default=v.exports},"9JlJ":function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n.rule_edit .el-select[data-v-1c1acb18]{\n  width: 100%;\n}\n.rule_edit .el-form-item__content[data-v-1c1acb18]{\n}\n.date-picker[data-v-1c1acb18]{\n  width: 100% !important;\n}\n.rule_edit .rule_ids .el-form-item__content[data-v-1c1acb18]{\n  height: auto;\n}\n.icon_item[data-v-1c1acb18]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 16px;\n}\n.icon_item.active[data-v-1c1acb18]{\n  color: #18bc9c;\n}\n\n","",{version:3,sources:["/Users/chitsanthu/Desktop/lenwell/wetransfer_api-zip_2022-08-29_1643/www/mg_lenwell/src/view/user/quota/edit.vue"],names:[],mappings:";AACA;EACE,YAAY;CACb;AACD;CACC;AACD;EACE,uBAAuB;CACxB;AACD;EACE,aAAa;CACd;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,0BAA0B;MACtB,uBAAuB;UACnB,+BAA+B;EACvC,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;EAC5B,gBAAgB;CACjB;AACD;EACE,eAAe;CAChB",file:"edit.vue",sourcesContent:["\n.rule_edit .el-select[data-v-1c1acb18]{\n  width: 100%;\n}\n.rule_edit .el-form-item__content[data-v-1c1acb18]{\n}\n.date-picker[data-v-1c1acb18]{\n  width: 100% !important;\n}\n.rule_edit .rule_ids .el-form-item__content[data-v-1c1acb18]{\n  height: auto;\n}\n.icon_item[data-v-1c1acb18]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 16px;\n}\n.icon_item.active[data-v-1c1acb18]{\n  color: #18bc9c;\n}\n\n"],sourceRoot:""}])},"Mh/D":function(e,t,n){var i=n("9JlJ");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("ba885774",i,!1,{})},ZmLo:function(e,t,n){var i=n("vn9r");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("cf462150",i,!1,{})},vn9r:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])}});