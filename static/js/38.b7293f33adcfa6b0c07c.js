webpackJsonp([38],{"1qwW":function(e,t){},dvKS:function(e,t){},xHyK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Js1K"),l={name:"ProjectEdit",props:["id","model_id"],components:{selectFile:i("daVB").a},data:function(){return{imageFull:"",disableStatus:!1,dialogTableVisible:!1,ruleForm:{form_token:"",id:"",title:"",title_zh:"",model_id:"",status:"1",repair_duration:"",price:"",weigh:"",image:"",is_hot:"1",is_new:"1"},rules:{title:[{required:!0,message:this.$t("config.title_no"),trigger:"blur|change"}],repair_duration:[{required:!0,message:this.$t("project.repair_duration_no"),trigger:"blur|change"}],price:[{required:!0,message:this.$t("project.price_no"),trigger:"blur|change"}]},ModelSearch:{page:1,types:2,title:""}}},computed:{uploadAction:function(){return this.$store.state.uploadAction}},created:function(){this.ruleForm.model_id=this.model_id,this.getformtoken(),this.id&&this.getInfo()},methods:{handleSuccess:function(e,t){this.imageFull=e.data.fullUrl,this.ruleForm.image=e.data.url},beforeUpload:function(e){},getInfo:function(){var e=this;e.$request.getProjectInfo({id:e.id}).then(function(t){if(t.data)for(var i in e.ruleForm)void 0!=t.data[i]&&null!=t.data[i]&&(e.ruleForm[i]=t.data[i]),"status"==i?e.ruleForm[i]=String(t.data[i]):"image"==i?e.imageFull=t.data.full_image:"is_hot"==i?e.ruleForm[i]=String(t.data[i]):"is_new"==i&&(e.ruleForm[i]=String(t.data[i]))})},getformtoken:function(){var e=this;e.$request.getformtoken().then(function(t){e.ruleForm.form_token=t.data.token})},submitForm:function(e){var t=this;t.disableStatus=!0,t.$refs[e].validate(function(e){e?t.$request.setProjectSave(t.ruleForm).then(function(e){t.disableStatus=!1,1==e.code?(t.$emit("changeProjectDialog",t.ruleForm),t.$notify({title:t.$t("config.tips"),message:e.msg,type:"success",duration:"2000"})):t.ruleForm.form_token=e.data.token}):t.disableStatus=!1})},selectLocationFile:function(){this.dialogTableVisible=!0},changeSelectFile:function(e){this.dialogTableVisible=!1,this.imageFull=e.full_url,this.ruleForm.image=e.url}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rule_edit",staticStyle:{padding:"30px","background-color":"white"}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{staticClass:"save_upload_container",staticStyle:{display:"none"},attrs:{label:"Image"}},[i("div",{staticClass:"save_upload_container_left"},[i("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.image,callback:function(t){e.$set(e.ruleForm,"image",t)},expression:"ruleForm.image"}})],1),e._v(" "),i("div",{staticClass:"save_upload_container_right"},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadAction,"show-file-list":!1,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[i("div",{staticClass:"upload_images_btn"},[i("i",{staticClass:"el-icon-upload"}),e._v("Upload")])]),e._v(" "),i("div",{staticClass:"save_select_file_btn",on:{click:function(t){return e.selectLocationFile()}}},[i("i",{staticClass:"el-icon-tickets"}),e._v("select")])],1),e._v(" "),e.imageFull?i("div",{staticClass:"upload_image_item"},[i("img",{attrs:{src:e.imageFull,alt:""}})]):e._e()]),e._v(" "),i("el-form-item",{attrs:{label:"Service Item",prop:"title"}},[i("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("config.price"),prop:"price"}},[i("el-input",{model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[i("template",{slot:"prepend"},[e._v("$")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("project.repair_duration"),prop:"repair_duration"}},[i("el-input",{attrs:{onkeyup:"this.value = this.value.match(/\\d+\\.?\\d{0,2}/)"},model:{value:e.ruleForm.repair_duration,callback:function(t){e.$set(e.ruleForm,"repair_duration",t)},expression:"ruleForm.repair_duration"}},[i("template",{slot:"append"},[e._v("HOUR")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("config.status")}},[i("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("Active")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("Disabled")])],1),e._v(" "),i("el-form-item",{attrs:{label:"Weight"}},[i("el-input",{model:{value:e.ruleForm.weight,callback:function(t){e.$set(e.ruleForm,"weight",t)},expression:"ruleForm.weight"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"none"},attrs:{label:"Is Hot"}},[i("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.is_hot,callback:function(t){e.$set(e.ruleForm,"is_hot",t)},expression:"ruleForm.is_hot"}},[e._v("true")]),e._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.is_hot,callback:function(t){e.$set(e.ruleForm,"is_hot",t)},expression:"ruleForm.is_hot"}},[e._v("false")])],1),e._v(" "),i("el-form-item",{staticStyle:{display:"none"},attrs:{label:"Is New"}},[i("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.is_new,callback:function(t){e.$set(e.ruleForm,"is_new",t)},expression:"ruleForm.is_new"}},[e._v("true")]),e._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.is_new,callback:function(t){e.$set(e.ruleForm,"is_new",t)},expression:"ruleForm.is_new"}},[e._v("false")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success",disabled:e.disableStatus},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.$t("config.submit")))])],1)],1),e._v(" "),e.dialogTableVisible?i("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogTableVisible,width:"800px",title:"Select File"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("selectFile",{on:{changeSelectFile:e.changeSelectFile}})],1):e._e()],1)},staticRenderFns:[]};var s=i("VU/8")(l,o,!1,function(e){i("1qwW")},"data-v-0035d99a",null).exports,r={components:{layoutPage:a.a,ProjectEdit:s},data:function(){return{dialogTableVisible:!1,loadingTable:!0,search:{page:1,model_id:"",pagesize:15},id:null,total:0,modelTitle:"",tableData:[],dialogTableTitle:"Info",searchShow:!1}},computed:{rank:function(){return this.$store.state.rank}},created:function(){var e=this.$route.query;this.search.model_id=e.model_id,this.modelTitle=e.title,this.getList()},methods:{refresh:function(){this.getList()},changPageSize:function(e){this.search.pagesize=e,this.getList()},changCurrentPage:function(e){this.search.page=e,this.getList()},changJumpPage:function(e){this.search.page=e,this.getList()},getList:function(){var e=this;e.loadingTable=!0,e.$request.getProjectList(e.search).then(function(t){e.loadingTable=!1,t.data&&(e.tableData=t.data.list,e.total=t.data.total?t.data.total:0)})},addRow:function(){this.id="",this.dialogTableTitle="Add",this.dialogTableVisible=!0},EditRow:function(e){this.dialogTableTitle="Edit",this.id=e.id,this.dialogTableVisible=!0},changeProjectDialog:function(e){this.dialogTableTitle="Info",this.id="",this.dialogTableVisible=!1,this.getList()},deleteRow:function(e){var t=this,i=this;i.$alert(i.$t("config.delMsg"),i.$t("config.tips"),{confirmButtonText:i.$t("config.confirm"),showCancelButton:!0,cancelButtonText:i.$t("config.cancel")}).then(function(){i.$request.delProject({id:e.id}).then(function(e){1==e.code&&(i.getList(),t.$notify({title:i.$t("config.tips"),message:e.msg,type:"success"}))})})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"group",staticStyle:{background:"white",padding:"15px","border-radius":"5px"}},[i("div",{staticClass:"toolbar"},[i("div",{staticClass:"toolbar_left"},[i("el-button",{staticClass:"d-button",attrs:{type:"success",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.$router.go(-1)}}}),e._v(" "),i("el-button",{staticClass:"d-refresh-button",attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}}),e._v(" "),e.rank&&e.rank.add?i("el-button",{staticClass:"d-buttom",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.$t("config.add")))]):e._e(),e._v(" "),i("span",{staticStyle:{display:"inline-block","font-size":"16px","font-weight":"bold","padding-left":"30px"}},[e._v("Modelï¼š"+e._s(e.modelTitle))])],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",splict:""}},[i("el-table-column",{attrs:{prop:"title","min-width":"240",label:"Service Item"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"200",label:e.$t("config.price")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v("$"+e._s(t.row.price))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:e.$t("config.status"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:1==t.row.status?"success":"danger","disable-transitions":""}},[e._v(e._s(1==t.row.status?"Active":"Disabled"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:e.$t("config.operate"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rank&&e.rank.edit?i("el-button",{staticClass:"table_td_btn table_td_btn_xs table_td_btn_success",attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),e.EditRow(t.row)}}},[e._v("\n            "+e._s(e.$t("config.edit"))+"\n          ")]):e._e(),e._v(" "),e.rank&&e.rank.del?i("el-button",{staticClass:"table_td_btn table_td_btn_xs table_td_btn_danger",attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),e.deleteRow(t.row)}}},[e._v("\n            "+e._s(e.$t("config.del"))+"\n          ")]):e._e()]}}])})],1),e._v(" "),i("layoutPage",{attrs:{total:e.total,currentpage:e.search.page},on:{changPageSize:e.changPageSize,changCurrentPage:e.changCurrentPage,changJumpPage:e.changJumpPage}}),e._v(" "),e.dialogTableVisible?i("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"800px",title:e.dialogTableTitle},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("ProjectEdit",{attrs:{id:e.id,model_id:e.search.model_id},on:{changeProjectDialog:e.changeProjectDialog}})],1):e._e()],1)},staticRenderFns:[]};var c=i("VU/8")(r,n,!1,function(e){i("dvKS")},"data-v-2c671966",null);t.default=c.exports}});