webpackJsonp([43],{DwDb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{selectFile:a("daVB").a},data:function(){return{dialogTableVisible:!1,dialogTableTitle:"",dialogType:"",showSaveTree:!1,isSubmit:!1,showSelectImg:!1,id:"",imageFull:"",selectNode:[],pNoteTitle:"No Parent",saveForm:{title:"",types:"1",weight:"1",status:"1",pid:0,icon_image:"",remark:""},treeData:[],defaultProps:{children:"children",label:"title",value:"id"}}},computed:{uploadAction:function(){return this.$store.state.uploadAction}},created:function(){this.getList()},methods:{addFun:function(e){this.dialogTableVisible=!0,this.dialogTableTitle="Add",this.dialogType="add",e?(this.selectNode=e,this.pNoteTitle=e.title,this.saveForm.pid=e.id,this.saveForm.types=String(e.types)):(this.pNoteTitle="No Parent",this.saveForm.pid=0)},editFun:function(e){this.dialogTableVisible=!0,this.dialogTableTitle="Edit",this.dialogType="edit",this.pNoteTitle="No Parent",e&&(this.saveForm={id:e.id,title:e.title,types:String(e.types),weight:e.weight,status:String(e.status),remark:e.remark,icon_image:e.icon_image,pid:0},this.imageFull=e.icon_image_full,void 0!=e.parent&&""!=e.parent&&(this.pNoteTitle=e.parent.title,this.saveForm.pid=e.parent.id))},closeDialog:function(){this.dialogTableVisible=!1,this.dialogTableTitle="=",this.dialogType="",this.pNoteTitle="",this.id="",this.imageFull="",this.saveForm={title:"",types:"1",weight:"1",status:"1",pid:0,remark:"",icon_image:""}},deleteFun:function(e,t){var a=this;e.childNodes.length>0?a.$message.error("Child nodes exist and cannot be deleted"):this.$confirm("Are you sure to delete?","Tips",{confirmButtonText:"true",cancelButtonText:"cancel",type:"warning"}).then(function(e){"confirm"==e&&a.$request.delWarehouseTypesInfo({id:t.id}).then(function(e){1==e.code&&(a.$message.success(e.msg),a.getList())})})},renderContent:function(e,t){var a=this,s=t.node,i=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[s.label])]),e("span",[e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.addFun(i)}}},[e("i",{class:"el-icon-plus"})]),e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.editFun(i)}}},[e("i",{class:"el-icon-edit"})]),e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.deleteFun(s,i)}}},[e("i",{class:"el-icon-delete"})])])])},selectParentNode:function(){this.showSaveTree=!0},delParentNode:function(){this.pNoteTitle="No Parent",this.saveForm.pid="0"},handleNodeClick:function(e){this.pNoteTitle=e.title,this.saveForm.pid=e.id,this.showSaveTree=!1},getList:function(){var e=this;e.$request.getWarehouseTypesTree({}).then(function(t){1==t.code&&(e.treeData=t.data)})},submitData:function(){var e=this;""!=e.saveForm.title?e.isSubmit||(e.isSubmit=!0,e.$request.saveWarehouseTypesInfo(e.saveForm).then(function(t){e.isSubmit=!1,1==t.code&&(e.$message.success(t.msg),e.getList(),e.closeDialog())})):e.$message.error("Title cannot be empty")},handleSuccess:function(e,t){this.imageFull=e.data.fullUrl,this.saveForm.icon_image=e.data.url},selectLocationFile:function(){this.showSelectImg=!0},changeSelectFile:function(e){this.showSelectImg=!1,this.imageFull=e.full_url,this.saveForm.icon_image=e.url}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"white",padding:"15px","border-radius":"5px","box-sizing":"border-box"}},[a("div",[a("div",{staticClass:"toolbar"},[a("div",{staticClass:"toolbar_left"},[a("el-button",{staticClass:"d-refresh-button",attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.getList()}}}),e._v(" "),a("el-button",{staticClass:"d-buttom",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.addFun()}}},[e._v("Add")])],1),e._v(" "),a("div",{staticClass:"toolbar-form"})])]),e._v(" "),a("div",{staticStyle:{height:"calc(100vh - 185px)","overflow-y":"auto",background:"white",border:"1px solid #c5c5c5",width:"350px",padding:"15px","box-sizing":"border-box"}},[a("el-tree",{staticClass:"list_tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent}})],1),e._v(" "),e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"600px",title:e.dialogTableTitle},on:{"update:visible":function(t){e.dialogTableVisible=t}}},["add"==e.dialogType?a("div",{staticStyle:{padding:"30px 15px"}},[a("el-form",{ref:"saveForm",staticClass:"demo-saveform",attrs:{model:e.saveForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Parent:"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"save_types_title"},[e._v("\n              "+e._s(e.pNoteTitle)+"\n            ")]),e._v(" "),a("div",{staticClass:"save_types_btns"},[a("div",{staticClass:"save_types_btns_btn",on:{click:e.selectParentNode}},[e._v("选择")]),e._v(" "),a("div",{staticClass:"save_types_btns_btn",on:{click:e.delParentNode}},[e._v("删除")])])]),e._v(" "),e.showSaveTree?a("div",{staticStyle:{border:"1px solid #e5e5e5","border-radius":"4px",padding:"10px","margin-top":"10px"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"title:"}},[a("el-input",{model:{value:e.saveForm.title,callback:function(t){e.$set(e.saveForm,"title",t)},expression:"saveForm.title"}})],1),e._v(" "),a("el-form-item",{staticClass:"save_upload_container",attrs:{label:"Image"}},[a("div",{staticClass:"save_upload_container_left"},[a("el-input",{attrs:{readonly:""},model:{value:e.saveForm.icon_image,callback:function(t){e.$set(e.saveForm,"icon_image",t)},expression:"saveForm.icon_image"}})],1),e._v(" "),a("div",{staticClass:"save_upload_container_right"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadAction,"show-file-list":!1,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[a("div",{staticClass:"upload_images_btn"},[a("i",{staticClass:"el-icon-upload"}),e._v("Upload")])]),e._v(" "),a("div",{staticClass:"save_select_file_btn",on:{click:function(t){return e.selectLocationFile()}}},[a("i",{staticClass:"el-icon-tickets"}),e._v("select")])],1),e._v(" "),e.imageFull?a("div",{staticClass:"upload_image_item"},[a("img",{attrs:{src:e.imageFull,alt:""}})]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"types:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.saveForm.types,callback:function(t){e.$set(e.saveForm,"types",t)},expression:"saveForm.types"}},[e._v("Repair")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.saveForm.types,callback:function(t){e.$set(e.saveForm,"types",t)},expression:"saveForm.types"}},[e._v("Goods")])],1),e._v(" "),a("el-form-item",{attrs:{label:"status:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.saveForm.status,callback:function(t){e.$set(e.saveForm,"status",t)},expression:"saveForm.status"}},[e._v("Enable")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.saveForm.status,callback:function(t){e.$set(e.saveForm,"status",t)},expression:"saveForm.status"}},[e._v("Disable")])],1),e._v(" "),a("el-form-item",{attrs:{label:"sort:"}},[a("el-input",{model:{value:e.saveForm.weight,callback:function(t){e.$set(e.saveForm,"weight",t)},expression:"saveForm.weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.saveForm.remark,callback:function(t){e.$set(e.saveForm,"remark",t)},expression:"saveForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitData}},[e._v("Submit")])],1)],1),e._v(" "),e.showSelectImg?a("el-dialog",{attrs:{"append-to-body":"",visible:e.showSelectImg,width:"800px",title:"Select File"},on:{"update:visible":function(t){e.showSelectImg=t}}},[a("selectFile",{on:{changeSelectFile:e.changeSelectFile}})],1):e._e()],1):e._e(),e._v(" "),"edit"==e.dialogType?a("div",{staticStyle:{padding:"30px 15px"}},[a("el-form",{ref:"saveForm",staticClass:"demo-saveform",attrs:{model:e.saveForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Parent:"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"save_types_title"},[e._v("\n              "+e._s(e.pNoteTitle)+"\n            ")]),e._v(" "),a("div",{staticClass:"save_types_btns"},[a("div",{staticClass:"save_types_btns_btn",on:{click:e.selectParentNode}},[e._v("选择")]),e._v(" "),a("div",{staticClass:"save_types_btns_btn",on:{click:e.delParentNode}},[e._v("删除")])])]),e._v(" "),e.showSaveTree?a("div",{staticStyle:{border:"1px solid #e5e5e5","border-radius":"4px",padding:"10px","margin-top":"10px"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"title:"}},[a("el-input",{model:{value:e.saveForm.title,callback:function(t){e.$set(e.saveForm,"title",t)},expression:"saveForm.title"}})],1),e._v(" "),a("el-form-item",{staticClass:"save_upload_container",attrs:{label:"Image"}},[a("div",{staticClass:"save_upload_container_left"},[a("el-input",{attrs:{readonly:""},model:{value:e.saveForm.icon_image,callback:function(t){e.$set(e.saveForm,"icon_image",t)},expression:"saveForm.icon_image"}})],1),e._v(" "),a("div",{staticClass:"save_upload_container_right"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadAction,"show-file-list":!1,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[a("div",{staticClass:"upload_images_btn"},[a("i",{staticClass:"el-icon-upload"}),e._v("Upload")])]),e._v(" "),a("div",{staticClass:"save_select_file_btn",on:{click:function(t){return e.selectLocationFile()}}},[a("i",{staticClass:"el-icon-tickets"}),e._v("select")])],1),e._v(" "),e.imageFull?a("div",{staticClass:"upload_image_item"},[a("img",{attrs:{src:e.imageFull,alt:""}})]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"types:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.saveForm.types,callback:function(t){e.$set(e.saveForm,"types",t)},expression:"saveForm.types"}},[e._v("Repair")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.saveForm.types,callback:function(t){e.$set(e.saveForm,"types",t)},expression:"saveForm.types"}},[e._v("Goods")])],1),e._v(" "),a("el-form-item",{attrs:{label:"status:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.saveForm.status,callback:function(t){e.$set(e.saveForm,"status",t)},expression:"saveForm.status"}},[e._v("Enable")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.saveForm.status,callback:function(t){e.$set(e.saveForm,"status",t)},expression:"saveForm.status"}},[e._v("Disable")])],1),e._v(" "),a("el-form-item",{attrs:{label:"sort:"}},[a("el-input",{model:{value:e.saveForm.weight,callback:function(t){e.$set(e.saveForm,"weight",t)},expression:"saveForm.weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.saveForm.remark,callback:function(t){e.$set(e.saveForm,"remark",t)},expression:"saveForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitData}},[e._v("Submit")])],1)],1),e._v(" "),e.showSelectImg?a("el-dialog",{attrs:{"append-to-body":"",visible:e.showSelectImg,width:"800px",title:"Select File"},on:{"update:visible":function(t){e.showSelectImg=t}}},[a("selectFile",{on:{changeSelectFile:e.changeSelectFile}})],1):e._e()],1):e._e()]):e._e()],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(e){a("JKbR")},"data-v-9d3b09ae",null);t.default=l.exports},JKbR:function(e,t){}});